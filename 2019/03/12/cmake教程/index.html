<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>翻译-CMake教程 | SS</title><link rel="stylesheet" type="text/css" href="../../../../css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="../../../../favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="../../../../favicon.ico"><link rel="apple-touch-icon" href="../../../../apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="../../../../apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="../../../../atom.xml"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-134074056-1','auto');ga('send','pageview');</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><a id="logo" href="../../../../.">SS</a><p class="description">不知道在说些什么</p></div><div id="nav-menu"><a class="current" href="../../../../."><i class="fa undefined"> 首页</i></a><a href="../../../../archives/"><i class="fa undefined"> 归档</i></a><a href="../../../../about/"><i class="fa undefined"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-4"><div class="content_container"><div class="post"><h1 class="post-title">翻译-CMake教程</h1><div class="post-meta">Mar 12, 2019<span> | </span><span class="category"><a href="../../../../categories/%E7%BF%BB%E8%AF%91/">翻译</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 3.9k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><span class="post-count"> 20</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="post-content"><p>翻译自文章<a href="https://www.johnlamp.net/cmake-tutorial.html">https://www.johnlamp.net/cmake-tutorial.html</a></p>
<h2 id="CMake是什么？"><a href="#CMake是什么？" class="headerlink" title="CMake是什么？"></a>CMake是什么？</h2><p>CMake是开源跨平台的构建工具，由Kitware开发。CMake提供一个简单的构建C&#x2F;C++项目的方式。实际上CMake不算一个完全的构建工具，它实际上是生成你系统构建工具的配置文件（比如Make）。</p>
<p>CMake允许更灵活的开发环境。CMake包括寻找库的工具，包括CTest，一个测试驱动程序。当配置好怎么运行测试的配置后。CTest会运行所以测试，然后提供测试结果总结。</p>
<p>CMake包含CPack工具，用于打包你的项目，将会到目标设备上安装。</p>
<h2 id="CMake安装"><a href="#CMake安装" class="headerlink" title="CMake安装"></a>CMake安装</h2><p>macOS：<code>brew install cmake</code></p>
<p>Ubuntu:   <code>sudo apt-get install cmake</code></p>
<p>RedHat&#x2F;CentOS: <code>sudo yum install cmake.x86_64</code></p>
<p>Windows:  在这个地址下载<a href="https://cmake.org/download/">https://cmake.org/download/</a></p>
<h2 id="上手练习"><a href="#上手练习" class="headerlink" title="上手练习"></a>上手练习</h2><p>在教程中将写一个ToDoList程序，使用命令行来生成Makefile</p>
<p>在VSCode中创建CmakeLists.txt，用于描述你的项目，以及输出什么。</p>
<p><code>CMakeLists.txt</code></p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">project</span>(<span class="string">&quot;To Do Lists&quot;</span>)</span><br><span class="line"><span class="keyword">add_executable</span>(toDo main.cc Todo.cc)</span><br></pre></td></tr></table></figure>

<p><code>project(name)</code>: project命令用于命名项目，可以添加项目支持的语言选项，CMake默认为C和CXX，因此如果没有安装C&#x2F;C++编译环境，就需要指定语言。文档：<a href="https://cmake.org/cmake/help/v2.8.10/cmake.html#command:project">链接</a></p>
<p><code>add_executable(target sources…)</code>: 这个命令告诉CMake你希望生成的可执行文件，它将作为target。剩下的是源文件，需要注意的是header files没有列出来，CMake将自动处理依赖关系。文档：<a href="https://cmake.org/cmake/help/v2.8.10/cmake.html#command:add_executable">链接</a></p>
<p>剩下的源程序</p>
<p><code>main.cc</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ToDo.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">int</span>    argc,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">char</span>** argv</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ToDo list;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>ToDo.h</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> TODO_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TODO_H</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ToDo</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">ToDo</span>();</span><br><span class="line">    ~<span class="built_in">ToDo</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// TODO_H</span></span></span><br></pre></td></tr></table></figure>

<p><code>ToDo.cc</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ToDo.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">ToDo::<span class="built_in">ToDo</span>()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ToDo::~<span class="built_in">ToDo</span>()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>CMake文档建议在源代码之外构建，也就是构建的结果不混在源码文件中，因此首先创建一个build文件夹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"> &gt; <span class="built_in">mkdir</span> build</span><br><span class="line"> &gt; <span class="built_in">cd</span> build</span><br><span class="line"> &gt; cmake -G <span class="string">&quot;Unix Makefiles&quot;</span> ..</span><br><span class="line">-- The C compiler identification is GNU 4.2.1</span><br><span class="line">-- The CXX compiler identification is GNU 4.2.1</span><br><span class="line">-- Checking whether C compiler has -isysroot</span><br><span class="line">-- Checking whether C compiler has -isysroot - <span class="built_in">yes</span></span><br><span class="line">-- Checking whether C compiler supports OSX deployment target flag</span><br><span class="line">-- Checking whether C compiler supports OSX deployment target flag - <span class="built_in">yes</span></span><br><span class="line">-- Check <span class="keyword">for</span> working C compiler: /usr/bin/gcc</span><br><span class="line">-- Check <span class="keyword">for</span> working C compiler: /usr/bin/gcc -- works</span><br><span class="line">-- Detecting C compiler ABI info</span><br><span class="line">-- Detecting C compiler ABI info - <span class="keyword">done</span></span><br><span class="line">-- Checking whether CXX compiler has -isysroot</span><br><span class="line">-- Checking whether CXX compiler has -isysroot - <span class="built_in">yes</span></span><br><span class="line">-- Checking whether CXX compiler supports OSX deployment target flag</span><br><span class="line">-- Checking whether CXX compiler supports OSX deployment target flag - <span class="built_in">yes</span></span><br><span class="line">-- Check <span class="keyword">for</span> working CXX compiler: /usr/bin/c++</span><br><span class="line">-- Check <span class="keyword">for</span> working CXX compiler: /usr/bin/c++ -- works</span><br><span class="line">-- Detecting CXX compiler ABI info</span><br><span class="line">-- Detecting CXX compiler ABI info - <span class="keyword">done</span></span><br><span class="line">-- Configuring <span class="keyword">done</span></span><br><span class="line">-- Generating <span class="keyword">done</span></span><br><span class="line">-- Build files have been written to: /Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/build</span><br><span class="line"> &gt; <span class="built_in">ls</span></span><br><span class="line">CMakeCache.txt		Makefile</span><br><span class="line">CMakeFiles		cmake_install.cmake</span><br><span class="line"> &gt; make</span><br><span class="line">Scanning dependencies of target toDo</span><br><span class="line">[ 50%] Building CXX object CMakeFiles/toDo.<span class="built_in">dir</span>/main.cc.o</span><br><span class="line">[100%] Building CXX object CMakeFiles/toDo.<span class="built_in">dir</span>/ToDo.cc.o</span><br><span class="line">Linking CXX executable toDo</span><br><span class="line">[100%] Built target toDo</span><br></pre></td></tr></table></figure>



<p><code>mkdir build</code>: 创建文件夹用于存放程序。需要把它放在源码外，这样很容易的清理构建结果。</p>
<p><code>cmake -G &quot;Unix Makefiles&quot; ..</code> :使用CMake构建Unix 的Makefiles，<code>-G</code>用于指定什么类型的项目文件会被生成，这依赖于你的系统，使用<code>cmake —help</code>会列出能够构建的类型。<code>..</code>表示源代码的路径，这个路径需要包括你的顶级CMakeLists.txt文件</p>
<p><code>make</code>: 使用Makefiles生成目标可执行文件</p>
<p>因为CMake执行的输出十分干净，但这样会让debug更困难。使用<code>make VERBOSE=1</code>来获取所有的输出信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"> &gt; </span><span class="language-bash"><span class="built_in">cd</span> build</span></span><br><span class="line"><span class="meta prompt_"> &gt; </span><span class="language-bash">make VERBOSE=1</span></span><br><span class="line">/usr/local/Cellar/cmake/2.8.8/bin/cmake -H&quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1&quot; -B&quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/build&quot; --check-build-system CMakeFiles/Makefile.cmake 0</span><br><span class="line">/usr/local/Cellar/cmake/2.8.8/bin/cmake -E cmake_progress_start &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/build/CMakeFiles&quot; &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/build/CMakeFiles/progress.marks&quot;</span><br><span class="line">make -f CMakeFiles/Makefile2 all</span><br><span class="line">make -f CMakeFiles/toDo.dir/build.make CMakeFiles/toDo.dir/depend</span><br><span class="line">cd &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/build&quot; &amp;&amp; /usr/local/Cellar/cmake/2.8.8/bin/cmake -E cmake_depends &quot;Unix Makefiles&quot; &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1&quot; &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1&quot; &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/build&quot; &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/build&quot; &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/build/CMakeFiles/toDo.dir/DependInfo.cmake&quot; --color=</span><br><span class="line">Dependee &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/build/CMakeFiles/toDo.dir/DependInfo.cmake&quot; is newer than depender &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/build/CMakeFiles/toDo.dir/depend.internal&quot;.</span><br><span class="line">Dependee &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/build/CMakeFiles/CMakeDirectoryInformation.cmake&quot; is newer than depender &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/build/CMakeFiles/toDo.dir/depend.internal&quot;.</span><br><span class="line">Scanning dependencies of target toDo</span><br><span class="line">make -f CMakeFiles/toDo.dir/build.make CMakeFiles/toDo.dir/build</span><br><span class="line">/usr/local/Cellar/cmake/2.8.8/bin/cmake -E cmake_progress_report &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/build/CMakeFiles&quot; 1</span><br><span class="line">[ 50%] Building CXX object CMakeFiles/toDo.dir/main.cc.o</span><br><span class="line">/usr/bin/c++     -o CMakeFiles/toDo.dir/main.cc.o -c &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/main.cc&quot;</span><br><span class="line">/usr/local/Cellar/cmake/2.8.8/bin/cmake -E cmake_progress_report &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/build/CMakeFiles&quot; 2</span><br><span class="line"><span class="meta prompt_">[100%</span><span class="language-bash">] Building CXX object CMakeFiles/toDo.<span class="built_in">dir</span>/ToDo.cc.o</span></span><br><span class="line">/usr/bin/c++     -o CMakeFiles/toDo.dir/ToDo.cc.o -c &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/ToDo.cc&quot;</span><br><span class="line">Linking CXX executable toDo</span><br><span class="line">/usr/local/Cellar/cmake/2.8.8/bin/cmake -E cmake_link_script CMakeFiles/toDo.dir/link.txt --verbose=1</span><br><span class="line">/usr/bin/c++    -Wl,-search_paths_first -Wl,-headerpad_max_install_names   CMakeFiles/toDo.dir/main.cc.o CMakeFiles/toDo.dir/ToDo.cc.o  -o toDo</span><br><span class="line">/usr/local/Cellar/cmake/2.8.8/bin/cmake -E cmake_progress_report &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/build/CMakeFiles&quot;  1 2</span><br><span class="line"><span class="meta prompt_">[100%</span><span class="language-bash">] Built target toDo</span></span><br><span class="line">/usr/local/Cellar/cmake/2.8.8/bin/cmake -E cmake_progress_start &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step1/build/CMakeFiles&quot; 0</span><br></pre></td></tr></table></figure>

<h2 id="简单的改进"><a href="#简单的改进" class="headerlink" title="简单的改进"></a>简单的改进</h2><p><code>CMakeLists.txt</code></p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">2.8</span> FATAL_ERROR)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_LEGACY_CYGWIN_WIN32 <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>(<span class="string">&quot;To Do List&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">enable_testing</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(toDo main.cc</span><br><span class="line">                    ToDo.cc)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_test</span>(toDoTest toDo)</span><br></pre></td></tr></table></figure>

<p><code>cmake_minimum_required(VERSION version [FATAL_ERROR])</code>:这个命令指定运行CMakeLists.txt至少需要的CMake版本。</p>
<p><code>set(CMAKE_LEGACY_CYGWIN_WIN32 0)</code>: 避免使用Cygwin的警告。</p>
<p><code>enable_testing()</code> ： 启用CMake项目的测试功能，只能在顶层CMakeLists.txt中使用。开启后能够使用<code>add_test()</code>命令</p>
<p><code>add_test(testname executable arg1 …)</code>：使用CTest运行测试，executable可以是测试程序、脚本等，接下来给代码添加测试</p>
<p><code>main.cc</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line">  <span class="keyword">using</span> std::cerr;</span><br><span class="line">  <span class="keyword">using</span> std::cout;</span><br><span class="line">  <span class="keyword">using</span> std::endl;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ToDo.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> EXPECT_EQUAL(test, expect) equalityTest( test,  expect, \</span></span><br><span class="line"><span class="meta">                                                #test, #expect, \</span></span><br><span class="line"><span class="meta">                                                __FILE__, __LINE__)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt; <span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2 &gt;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">equalityTest</span><span class="params">(<span class="type">const</span> T1    testValue,</span></span></span><br><span class="line"><span class="params"><span class="function">                 <span class="type">const</span> T2    expectedValue,</span></span></span><br><span class="line"><span class="params"><span class="function">                 <span class="type">const</span> <span class="type">char</span>* testName,</span></span></span><br><span class="line"><span class="params"><span class="function">                 <span class="type">const</span> <span class="type">char</span>* expectedName,</span></span></span><br><span class="line"><span class="params"><span class="function">                 <span class="type">const</span> <span class="type">char</span>* fileName,</span></span></span><br><span class="line"><span class="params"><span class="function">                 <span class="type">const</span> <span class="type">int</span>   lineNumber)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">int</span>    argc,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">char</span>** argv</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> result = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    ToDo list;</span><br><span class="line"></span><br><span class="line">    list.<span class="built_in">addTask</span>(<span class="string">&quot;write code&quot;</span>);</span><br><span class="line">    list.<span class="built_in">addTask</span>(<span class="string">&quot;compile&quot;</span>);</span><br><span class="line">    list.<span class="built_in">addTask</span>(<span class="string">&quot;test&quot;</span>);</span><br><span class="line"></span><br><span class="line">    result |= <span class="built_in">EXPECT_EQUAL</span>(list.<span class="built_in">size</span>(),     <span class="number">3</span>);</span><br><span class="line">    result |= <span class="built_in">EXPECT_EQUAL</span>(list.<span class="built_in">getTask</span>(<span class="number">0</span>), <span class="string">&quot;write code&quot;</span>);</span><br><span class="line">    result |= <span class="built_in">EXPECT_EQUAL</span>(list.<span class="built_in">getTask</span>(<span class="number">1</span>), <span class="string">&quot;compile&quot;</span>);</span><br><span class="line">    result |= <span class="built_in">EXPECT_EQUAL</span>(list.<span class="built_in">getTask</span>(<span class="number">2</span>), <span class="string">&quot;test&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (result == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Test passed&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt; <span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2 &gt;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">equalityTest</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> T1    testValue,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> T2    expectedValue,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> <span class="type">char</span>* testName,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> <span class="type">char</span>* expectedName,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> <span class="type">char</span>* fileName,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> <span class="type">int</span>   lineNumber</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (testValue != expectedValue)</span><br><span class="line">    &#123;</span><br><span class="line">        cerr &lt;&lt; fileName &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; lineNumber &lt;&lt; <span class="string">&quot;: &quot;</span></span><br><span class="line">             &lt;&lt; <span class="string">&quot;Expected &quot;</span> &lt;&lt; testName &lt;&lt; <span class="string">&quot; &quot;</span></span><br><span class="line">             &lt;&lt; <span class="string">&quot;to equal &quot;</span> &lt;&lt; expectedName &lt;&lt; <span class="string">&quot; (&quot;</span> &lt;&lt; expectedValue &lt;&lt; <span class="string">&quot;) &quot;</span></span><br><span class="line">             &lt;&lt; <span class="string">&quot;but it was (&quot;</span> &lt;&lt; testValue &lt;&lt; <span class="string">&quot;)&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>ToDo.h</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> TODO_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TODO_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ToDo</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">ToDo</span>();</span><br><span class="line">    ~<span class="built_in">ToDo</span>();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">size_t</span> <span class="title">size</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addTask</span><span class="params">(<span class="type">const</span> std::string&amp; task)</span></span>;</span><br><span class="line">    <span class="function">std::string <span class="title">getTask</span><span class="params">(<span class="type">size_t</span> index)</span> <span class="type">const</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::vector&lt; std::string &gt; this_tasks;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// TODO_H</span></span></span><br></pre></td></tr></table></figure>

<p><code>ToDo.cc</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ToDo.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ToDo::<span class="built_in">ToDo</span>()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ToDo::~<span class="built_in">ToDo</span>()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">ToDo::size</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> this_tasks.<span class="built_in">size</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ToDo::addTask</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">const</span> std::string&amp; task</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    this_tasks.<span class="built_in">push_back</span>(task);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">std::string <span class="title">ToDo::getTask</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">size_t</span> index</span></span></span><br><span class="line"><span class="params"><span class="function">)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (index &lt; this_tasks.<span class="built_in">size</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> this_tasks[index];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来像之前那样构建makefiles，然后运行测试<code>make test</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"> &gt; </span><span class="language-bash"><span class="built_in">mkdir</span> build</span></span><br><span class="line"><span class="meta prompt_"> &gt; </span><span class="language-bash"><span class="built_in">cd</span> build</span></span><br><span class="line"><span class="meta prompt_"> &gt; </span><span class="language-bash">cmake -G <span class="string">&quot;Unix Makefiles&quot;</span> ..</span></span><br><span class="line">-- The C compiler identification is GNU 4.2.1</span><br><span class="line">-- The CXX compiler identification is GNU 4.2.1</span><br><span class="line">-- Checking whether C compiler has -isysroot</span><br><span class="line">-- Checking whether C compiler has -isysroot - yes</span><br><span class="line">-- Checking whether C compiler supports OSX deployment target flag</span><br><span class="line">-- Checking whether C compiler supports OSX deployment target flag - yes</span><br><span class="line">-- Check for working C compiler: /usr/bin/gcc</span><br><span class="line">-- Check for working C compiler: /usr/bin/gcc -- works</span><br><span class="line">-- Detecting C compiler ABI info</span><br><span class="line">-- Detecting C compiler ABI info - done</span><br><span class="line">-- Checking whether CXX compiler has -isysroot</span><br><span class="line">-- Checking whether CXX compiler has -isysroot - yes</span><br><span class="line">-- Checking whether CXX compiler supports OSX deployment target flag</span><br><span class="line">-- Checking whether CXX compiler supports OSX deployment target flag - yes</span><br><span class="line">-- Check for working CXX compiler: /usr/bin/c++</span><br><span class="line">-- Check for working CXX compiler: /usr/bin/c++ -- works</span><br><span class="line">-- Detecting CXX compiler ABI info</span><br><span class="line">-- Detecting CXX compiler ABI info - done</span><br><span class="line">-- Configuring done</span><br><span class="line">-- Generating done</span><br><span class="line">-- Build files have been written to: /Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step2/build</span><br><span class="line"><span class="meta prompt_"> &gt; </span><span class="language-bash">make</span></span><br><span class="line">Scanning dependencies of target toDo</span><br><span class="line">[ 50%] Building CXX object CMakeFiles/toDo.dir/main.cc.o</span><br><span class="line"><span class="meta prompt_">[100%</span><span class="language-bash">] Building CXX object CMakeFiles/toDo.<span class="built_in">dir</span>/ToDo.cc.o</span></span><br><span class="line">Linking CXX executable toDo</span><br><span class="line"><span class="meta prompt_">[100%</span><span class="language-bash">] Built target toDo</span></span><br><span class="line"><span class="meta prompt_"> &gt; </span><span class="language-bash">make <span class="built_in">test</span></span></span><br><span class="line">Running tests...</span><br><span class="line">Test project /Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step2/build</span><br><span class="line">    Start 1: toDoTest</span><br><span class="line">1/1 Test #1: toDoTest .........................   Passed    0.01 sec</span><br><span class="line"><span class="meta prompt_">100% </span><span class="language-bash">tests passed, 0 tests failed out of 1</span></span><br><span class="line">Total Test time (real) =   0.03 sec</span><br><span class="line"><span class="meta prompt_"> &gt; </span><span class="language-bash"><span class="built_in">ls</span> Testing</span></span><br><span class="line">Temporary</span><br><span class="line"><span class="meta prompt_"> &gt; </span><span class="language-bash"><span class="built_in">ls</span> Testing/Temporary</span></span><br><span class="line">CTestCostData.txt	LastTest.log</span><br><span class="line"><span class="meta prompt_"> &gt; </span><span class="language-bash"><span class="built_in">cat</span> Testing/Temporary/LastTest.<span class="built_in">log</span></span></span><br><span class="line">Start testing: Jul 16 22:00 EDT</span><br><span class="line">----------------------------------------------------------</span><br><span class="line">1/1 Testing: toDoTest</span><br><span class="line">1/1 Test: toDoTest</span><br><span class="line">Command: &quot;/Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step2/build/toDo&quot;</span><br><span class="line">Directory: /Volumes/Documents/Programming/C++/CMake Tutorial/flavors/part1_step2/build</span><br><span class="line">&quot;toDoTest&quot; start time: Jul 16 22:00 EDT</span><br><span class="line">Output:</span><br><span class="line">----------------------------------------------------------</span><br><span class="line">Test passed</span><br><span class="line">&lt;end of output&gt;</span><br><span class="line">Test time =   0.01 sec</span><br><span class="line">----------------------------------------------------------</span><br><span class="line">Test Passed.</span><br><span class="line">&quot;toDoTest&quot; end time: Jul 16 22:00 EDT</span><br><span class="line">&quot;toDoTest&quot; time elapsed: 00:00:00</span><br><span class="line">----------------------------------------------------------</span><br><span class="line">End testing: Jul 16 22:00 EDT</span><br><span class="line"><span class="meta prompt_"> &gt; </span><span class="language-bash"><span class="built_in">cat</span> Testing/Temporary/CTestCostData.txt</span></span><br><span class="line">toDoTest 1 0.00976491</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<p><code>make test</code>: 因为向CMakelists.txt中添加了<code>enable_testing()</code>方法，这样Makefile里有“test”这个target，这个target会运行CTest来运行所以的测试用例，这里只有一个。</p>
<h2 id="ZMAP的CMakelists-txt阅读"><a href="#ZMAP的CMakelists-txt阅读" class="headerlink" title="ZMAP的CMakelists.txt阅读"></a>ZMAP的CMakelists.txt阅读</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">2.8</span>.<span class="number">12</span> FATAL_ERROR)</span><br><span class="line"><span class="keyword">project</span>(ZMAP C)</span><br><span class="line"><span class="keyword">set</span>(ZMAP_VERSION DEVELOPMENT) <span class="comment"># Change DEVELOPMENT to version number for release</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">option</span>(WITH_REDIS <span class="string">&quot;Build with support for Redis DB&quot;</span> <span class="keyword">OFF</span>)</span><br><span class="line"><span class="keyword">option</span>(ENABLE_DEVELOPMENT <span class="string">&quot;Enable development specific compiler and linker flags&quot;</span> <span class="keyword">OFF</span>)</span><br><span class="line"><span class="keyword">option</span>(ENABLE_LOG_TRACE <span class="string">&quot;Enable log trace messages&quot;</span> <span class="keyword">OFF</span>)</span><br><span class="line"><span class="keyword">option</span>(RESPECT_INSTALL_PREFIX_CONFIG <span class="string">&quot;Respect CMAKE_INSTALL_PREFIX for /etc&quot;</span> <span class="keyword">OFF</span>)</span><br><span class="line"><span class="keyword">option</span>(WITH_WERROR <span class="string">&quot;Build with -Werror&quot;</span> <span class="keyword">OFF</span>)</span><br><span class="line"><span class="keyword">option</span>(WITH_PFRING <span class="string">&quot;Build with PF_RING ZC for send (10 GigE)&quot;</span> <span class="keyword">OFF</span>)</span><br><span class="line"><span class="keyword">option</span>(FORCE_CONF_INSTALL <span class="string">&quot;Overwrites existing configuration files at install&quot;</span> <span class="keyword">OFF</span>)</span><br></pre></td></tr></table></figure>

<p><code>set(&lt;variable&gt; &lt;value&gt;... [PARENT_SCOPE])</code>：声明在目前区域的变量</p>
<p><code>project(&lt;PROJECT-NAME&gt; [LANGUAGES] [&lt;language-name&gt;...])</code>: 项目名zmap，使用C语言</p>
<p><code>option(&lt;option_variable&gt; &quot;help string describing option&quot; [initial value])</code>: 命令行时的用户选项<code>cmake [&#123;-D &lt;var&gt;=&lt;value&gt;&#125;...]</code>，比如cmake -G -DWITH_REDIS&#x3D;ON -DENABLE_DEVELOPMENT&#x3D;ON</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="string">&quot;$&#123;CMAKE_CXX_COMPILER_ID&#125;&quot;</span> <span class="keyword">STREQUAL</span> <span class="string">&quot;Clang&quot;</span>)</span><br><span class="line">    <span class="keyword">set</span>(USING_CLANG <span class="string">&quot;YES&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">    <span class="keyword">set</span>(USING_GCC <span class="string">&quot;YES&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;$&#123;CMAKE_SYSTEM_NAME&#125;&quot;</span> <span class="keyword">MATCHES</span> <span class="string">&quot;FreeBSD&quot;</span> <span class="keyword">OR</span> <span class="string">&quot;$&#123;CMAKE_SYSTEM_NAME&#125;&quot;</span> <span class="keyword">MATCHES</span> <span class="string">&quot;NetBSD&quot;</span> <span class="keyword">OR</span> <span class="string">&quot;$&#123;CMAKE_SYSTEM_NAME&#125;&quot;</span> <span class="keyword">MATCHES</span> <span class="string">&quot;DragonFly&quot;</span>)</span><br><span class="line">    <span class="keyword">set</span>(BSD <span class="string">&quot;YES&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;$&#123;CMAKE_SYSTEM_NAME&#125;&quot;</span> <span class="keyword">MATCHES</span> <span class="string">&quot;NetBSD&quot;</span>)</span><br><span class="line">    <span class="keyword">set</span>(NetBSD <span class="string">&quot;YES&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br></pre></td></tr></table></figure>

<p><code>$&#123;name&#125;</code>:用于引用变量，更多用在字符串展开。CMAKE_CXX_COMPILER_ID是编译器的厂商信息，CMAKE_SYSTEM_NAME获取操作系统信息</p>
<p><code>STREQUAL</code>：对比前后两个字符串是否相等</p>
<p><code>if表达式</code>: 包含许多能够判断的条件关闭，比如变量、<code>&lt;expr1&gt; OR &lt;expr2&gt;</code>、 <code>TARGET target-name</code>、 <code>IS_DIRECTORY path-to-directory</code>等.</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(GCCWARNINGS</span><br><span class="line">    <span class="string">&quot;-Wall -Wformat=2 -Wno-format-nonliteral&quot;</span></span><br><span class="line">    <span class="string">&quot;-pedantic -fno-strict-aliasing&quot;</span></span><br><span class="line">    <span class="string">&quot;-Wextra&quot;</span></span><br><span class="line">    <span class="string">&quot;-Wfloat-equal -Wundef -Wwrite-strings -Wredundant-decls&quot;</span></span><br><span class="line">    <span class="string">&quot;-Wnested-externs -Wbad-function-cast -Winit-self&quot;</span></span><br><span class="line">    <span class="string">&quot;-Wmissing-noreturn&quot;</span></span><br><span class="line">    <span class="string">&quot;-Wstack-protector&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Fix line breaks</span></span><br><span class="line"><span class="keyword">string</span>(REPLACE <span class="string">&quot;;&quot;</span> <span class="string">&quot; &quot;</span>  GCCWARNINGS <span class="string">&quot;$&#123;GCCWARNINGS&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(WITH_WERROR)</span><br><span class="line">    <span class="keyword">set</span>(GCCWARNINGS <span class="string">&quot;$&#123;GCCWARNINGS&#125; -Werror&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(ENABLE_DEVELOPMENT)</span><br><span class="line">    <span class="keyword">set</span>(CMAKE_C_FLAGS <span class="string">&quot;$&#123;CMAKE_C_FLAGS&#125; -ggdb&quot;</span>)</span><br><span class="line">    <span class="keyword">set</span>(CMAKE_EXE_LINKER_FLAGS <span class="string">&quot;$&#123;CMAKE_EXE_LINKER_FLAGS&#125; -g&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">    <span class="comment"># Hardening and optimizations for building with gcc</span></span><br><span class="line">    <span class="keyword">set</span>(GCCHARDENING <span class="string">&quot;-U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=2 -fstack-protector-all -fwrapv -fPIC --param ssp-buffer-size=1&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">NOT</span> APPLE <span class="keyword">AND</span> <span class="keyword">NOT</span> BSD)</span><br><span class="line">        <span class="keyword">set</span>(LDHARDENING <span class="string">&quot;-z relro -z now&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>()</span><br><span class="line">        <span class="keyword">set</span>(LDHARDENING <span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">set</span>(CMAKE_C_FLAGS <span class="string">&quot;$&#123;CMAKE_C_FLAGS&#125; $&#123;GCCHARDENING&#125; -O2&quot;</span>)</span><br><span class="line">    <span class="keyword">set</span>(CMAKE_EXE_LINKER_FLAGS <span class="string">&quot;$&#123;LDHARDENING&#125; $&#123;CMAKE_EXE_LINKER_FLAGS&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(ENABLE_LOG_TRACE)</span><br><span class="line">    <span class="keyword">add_definitions</span>(<span class="string">&quot;-DDEBUG&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_C_FLAGS <span class="string">&quot;$&#123;GCCWARNINGS&#125; $&#123;CMAKE_C_FLAGS&#125;&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><code>string(FUNC, ARGS)</code>：使用字符串相关操作。<code>string(REPLACE &quot;;&quot; &quot; &quot;  GCCWARNINGS &quot;$&#123;GCCWARNINGS&#125;&quot;)</code>表示这里使用REPLACE操作<code>string(REPLACE &lt;match-string&gt; &lt;replace-string&gt; &lt;out-var&gt; &lt;input&gt;…)</code>, 参考<a href="https://cmake.org/cmake/help/v3.12/command/string.html">链接</a></p>
<p><code>add_definitions(-DFOO -DBAR..)</code>：通过编译器命令行添加预定义</p>
<p>可以看到如果打开<code>ENABLE_DEVELOPMENT</code>，生成调试信息，相对于<code>-g</code>选项，<code>-ggdb</code>能够提供最多的编译信息。</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span>(FindPkgConfig)</span><br><span class="line">pkg_check_modules(JSON json-c)</span><br><span class="line"><span class="keyword">if</span>(JSON_FOUND)</span><br><span class="line">    <span class="keyword">include_directories</span>(<span class="variable">$&#123;JSON_INCLUDE_DIRS&#125;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">    <span class="keyword">message</span>(FATAL_ERROR <span class="string">&quot;Did not find libjson&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"><span class="keyword">set</span>(CMAKE_C_FLAGS <span class="string">&quot;$&#123;CMAKE_C_FLAGS&#125; $&#123;JSON_CFLAGS&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(WITH_REDIS)</span><br><span class="line">    <span class="keyword">set</span>(REDIS_LIBS hiredis)</span><br><span class="line">    <span class="keyword">add_definitions</span>(<span class="string">&quot;-DREDIS&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(WITH_PFRING)</span><br><span class="line">    <span class="keyword">add_definitions</span>(<span class="string">&quot;-DPFRING&quot;</span>)</span><br><span class="line">    <span class="keyword">set</span>(PFRING_LIBRARIES pfring rt numa)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Standard FLAGS</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_C_FLAGS <span class="string">&quot;$&#123;CMAKE_C_FLAGS&#125; -std=gnu99&quot;</span>)</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">NOT</span> APPLE)</span><br><span class="line">    <span class="keyword">set</span>(CMAKE_EXE_LINKER_FLAGS <span class="string">&quot;$&#123;CMAKE_EXE_LINKER_FLAGS&#125; -pthread&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set up OS-specific include directories</span></span><br><span class="line"><span class="keyword">if</span>(APPLE)</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">EXISTS</span> /opt/local/<span class="keyword">include</span>)</span><br><span class="line">        <span class="keyword">include_directories</span>(/opt/local/<span class="keyword">include</span>)</span><br><span class="line">    <span class="keyword">endif</span>()</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">EXISTS</span> /opt/local/lib)</span><br><span class="line">        <span class="keyword">link_directories</span>(/opt/local/lib)</span><br><span class="line">    <span class="keyword">endif</span>()</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">EXISTS</span> /usr/local/<span class="keyword">include</span>)</span><br><span class="line">        <span class="keyword">include_directories</span>(/usr/local/<span class="keyword">include</span>)</span><br><span class="line">    <span class="keyword">endif</span>()</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">EXISTS</span> /usr/local/lib)</span><br><span class="line">        <span class="keyword">link_directories</span>(/usr/local/lib)</span><br><span class="line">    <span class="keyword">endif</span>()</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(BSD)</span><br><span class="line">    <span class="keyword">include_directories</span>(/usr/local/<span class="keyword">include</span>)</span><br><span class="line">    <span class="keyword">link_directories</span>(/usr/local/lib)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(NetBSD)</span><br><span class="line">    <span class="keyword">include_directories</span>(/usr/pkg/<span class="keyword">include</span>)</span><br><span class="line">    <span class="keyword">link_directories</span>(/usr/pkg/lib)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_subdirectory</span>(lib)</span><br><span class="line"><span class="keyword">add_subdirectory</span>(src)</span><br></pre></td></tr></table></figure>

<p><code>include(&lt;file|module&gt; [OPTIONAL] [RESULT_VARIABLE &lt;VAR&gt;] [NO_POLICY_SCOPE])</code>: 加载并运行指定文件（模块）里的cmake代码。这里加载模块pkg_check_modules</p>
<p><code>pkg_check_modules(&lt;PREFIX&gt; [REQUIRED] [QUIET] &lt;MODULE&gt; [&lt;MODULE&gt;]*) </code>:检测所有给定的模块是否存在，<code>pkg_check_modules(JSON json-c)</code>检查json-c模块是否存在，JSON_FOUND表示模块是否存在。参考<a href="https://cmake.org/cmake/help/v3.0/module/FindPkgConfig.html">文档</a></p>
<p><code>JSON_LIBRARY_DIRS</code>:由<code>&lt;PREFIX&gt;_LIBRARY_DIRS</code>组成，表示到目标模块的路径</p>
<p><code>include_directories([AFTER|BEFORE] [SYSTEM] dir1 [dir2 ...])</code>:添加相关文件夹来给编译器搜索include文件</p>
<p><code>link_directories([AFTER|BEFORE] directory1 [directory2 ...])</code>:添加相关库的路径，用于linker来链接</p>
<p><code>add_subdirectory(source_dir [binary_dir] [EXCLUDE_FROM_ALL])</code>:添加子目录，需要子目录也有cmakelists.txt</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Install conf files</span></span><br><span class="line"><span class="keyword">if</span>(RESPECT_INSTALL_PREFIX_CONFIG)</span><br><span class="line">    <span class="keyword">set</span>(CONFIG_DESTINATION <span class="string">&quot;etc/zmap&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">    <span class="keyword">set</span>(CONFIG_DESTINATION <span class="string">&quot;/etc/zmap&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">FILE</span>(GLOB CONF_FILES <span class="string">&quot;$&#123;PROJECT_SOURCE_DIR&#125;/conf/*&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;Default ZMap configuration file location is /etc/zmap&quot;</span>)</span><br><span class="line"><span class="keyword">foreach</span>(EACH_CONF <span class="variable">$&#123;CONF_FILES&#125;</span>)</span><br><span class="line">    <span class="keyword">get_filename_component</span>(CONF_BASENAME <span class="variable">$&#123;EACH_CONF&#125;</span> NAME)</span><br><span class="line">    <span class="keyword">message</span>(STATUS <span class="string">&quot;Checking if $&#123;CONF_BASENAME&#125; exists there...&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="string">&quot;/etc/zmap/$&#123;CONF_BASENAME&#125;&quot;</span>)</span><br><span class="line">        <span class="keyword">install</span>(FILES <span class="variable">$&#123;EACH_CONF&#125;</span> DESTINATION <span class="variable">$&#123;CONFIG_DESTINATION&#125;</span>)</span><br><span class="line">    <span class="keyword">elseif</span>(FORCE_CONF_INSTALL)</span><br><span class="line">        <span class="keyword">message</span>(WARNING <span class="string">&quot;FORCE_CONF_INSTALL will overwrite any exsiting configuration files&quot;</span>)</span><br><span class="line">        <span class="keyword">install</span>(FILES <span class="variable">$&#123;EACH_CONF&#125;</span> DESTINATION <span class="variable">$&#123;CONFIG_DESTINATION&#125;</span>)</span><br><span class="line">    <span class="keyword">else</span>()</span><br><span class="line">        <span class="keyword">message</span>(WARNING <span class="string">&quot;Existing configuration file detected at /etc/zmap/$&#123;CONF_BASENAME&#125;, $&#123;CONF_BASENAME&#125; from sources will NOT be installed. Please check and install manually!&quot;</span>)</span><br><span class="line">    <span class="keyword">endif</span>()</span><br><span class="line"><span class="keyword">endforeach</span>()</span><br></pre></td></tr></table></figure>

<p><code>File(FUNC, ARGS)</code>：File操作命令，<code>FILE(GLOB CONF_FILES &quot;$&#123;PROJECT_SOURCE_DIR&#125;/conf/*&quot;)</code>中GLOB表示Globbing通配符，也就是将通配符匹配的文件列表存入CONF_FILES这个变量中。</p>
<p><code>foreach</code>:遍历列表</p>
<p><code>get_filename_component(CONF_BASENAME $&#123;EACH_CONF&#125; NAME)</code>：获取${EACH_CONF}路径中的文件名（NAME）存放到CONF_BASENAME中</p>
<p><code>install</code>: 将文件存放到指定位置，<code>install(FILES, …)</code>指定了是文件形式，还有PROGRAMS形式</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Allow Debian Packaging</span></span><br><span class="line"><span class="keyword">include</span>(InstallRequiredSystemLibraries)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CPACK_SET_DESTDIR <span class="string">&quot;on&quot;</span>)</span><br><span class="line"><span class="keyword">set</span>(CPACK_PACKAGING_INSTALL_PREFIX <span class="string">&quot;/tmp&quot;</span>)</span><br><span class="line"><span class="keyword">set</span>(CPACK_GENERATOR <span class="string">&quot;DEB&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(<span class="variable">$&#123;VERSION&#125;</span> CPACK_DEBIAN_PACKAGE_VERSION)</span><br><span class="line"><span class="keyword">set</span>(CPACK_DEBIAN_PACKAGE_PRIORITY <span class="string">&quot;optional&quot;</span>)</span><br><span class="line"><span class="keyword">set</span>(CPACK_DEBIAN_PACKAGE_SECTION <span class="string">&quot;network&quot;</span>)</span><br><span class="line"><span class="keyword">set</span>(CPACK_DEBIAN_ARCHITECTURE <span class="variable">$&#123;CMAKE_SYSTEM_PROCESSOR&#125;</span>)</span><br><span class="line"><span class="keyword">set</span>(CPACK_DEBIAN_PACKAGE_DEPENDS <span class="string">&quot;libc6 (&gt;= 2.1.3), libgmp10, libpcap0.8, libjson-c-dev&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CPACK_PACKAGE_DESCRIPTION <span class="string">&quot;Internet-scale network scanner&quot;</span>)</span><br><span class="line"><span class="keyword">set</span>(CPACK_PACKAGE_DESCRIPTION_SUMMARY <span class="string">&quot;ZMap is an open source network scanner that enables researchers to easily perform Internet-wide network studies. With a single machine and a well provisioned network uplink, ZMap is capable of performing a complete scan of the IPv4 address space in under five minutes, approaching the theoretical limit of gigabit Ethernet. ZMap can be used to study protocol adoption over time, monitor service availability, and help us better understand large systems distributed across the Internet.&quot;</span>)</span><br><span class="line"><span class="keyword">set</span>(CPACK_PACKAGE_CONTACT <span class="string">&quot;Zakir Durumeric &lt;zakird@gmail.com&gt;&quot;</span>)</span><br><span class="line"><span class="keyword">set</span>(CPACK_PACKAGE_FILE_NAME <span class="string">&quot;$&#123;CMAKE_PROJECT_NAME&#125;_$&#123;VERSION&#125;_$&#123;CPACK_DEBIAN_ARCHITECTURE&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CPACK_COMPONENTS_ALL Libraries ApplicationData)</span><br><span class="line"></span><br><span class="line"><span class="keyword">include</span>(CPack)</span><br></pre></td></tr></table></figure>

<p><code>InstallRequiredSystemLibraries</code>:这个模块用于搜索编译器提供的系统运行时库，添加相关规则。</p>
<p><code>CPack</code>：这个模块用于生成多种形式的二进制和源码安装器</p>
<h2 id="常用信息"><a href="#常用信息" class="headerlink" title="常用信息"></a>常用信息</h2><p><strong>常用变量</strong>：</p>
<p>CMAKE_MAJOR_VERSION，CMAKE 主版本号，比如2.4.6 中的2</p>
<p>CMAKE_MINOR_VERSION，CMAKE 次版本号，比如2.4.6 中的4</p>
<p>CMAKE_PATCH_VERSION，CMAKE 补丁等级，比如2.4.6 中的6</p>
<p>CMAKE_SYSTEM ，系统名称，比如Linux-2.6.22</p>
<p>CMAKE_SYSTEM_NAME ，不包含版本的系统名，比如Linux</p>
<p>CMAKE_SYSTEM_VERSION ，系统版本，比如2.6.22</p>
<p>CMAKE_SYSTEM_PROCESSOR，处理器名称，比如i686.</p>
<p>UNIX ，在所有的类UNIX平台为TRUE，包括OS X 和cygwin</p>
<p>WIN32 ，在所有的win32 平台为TRUE，包括cygwin</p>
<p><strong>常用开关变量：</strong></p>
<p>CMAKE_ALLOW_LOOSE_LOOP_CONSTRUCTS ，用来控制IF ELSE 语句的书写方式，在下一节语法部分会讲到。</p>
<p>BUILD_SHARED_LIBS</p>
<p>这个开关用来控制默认的库编译方式，如果不进行设置，使用ADD_LIBRARY 并没有指定库类型的情况下，默认编译生成的库都是静态库。如果SET(BUILD_SHARED_LIBS ON) 后，默认生成的为动态库。</p>
<p>CMAKE_C_FLAGS 设置C编译选项，也可以通过指令ADD_DEFINITIONS() 添加。</p>
<p>CMAKE_CXX_FLAGS 设置C++ 编译选项，也可以通过指令ADD_DEFINITIONS() 添加。</p>
<p><strong>环境变量</strong></p>
<p>MESSAGE(STATUS “HOME dir: $ENV{HOME}”)</p>
</div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>ss</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="/2019/03/12/cmake教程/">https://ssdemajia.github.io/2019/03/12/cmake%E6%95%99%E7%A8%8B/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本站所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0 CN</a> 许可协议。转载请注明出处！</li></ul></div><br><div class="tags"><a href="../../../../tags/cmake/">cmake</a><a href="../../../../tags/c/">c++</a></div><div class="post-nav"><a class="pre" href="../Unix-%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B/">Apue读书笔记-Unix 守护进程</a><a class="next" href="../../10/zgrab2%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/">zgrab2源码阅读</a></div><div id="comments"><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论（请确保 Disqus 可以正常加载）</button></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'https://ssdemajia.github.io/2019/03/12/cmake教程/';
    this.page.identifier = '2019/03/12/cmake教程/';
    this.page.title = '翻译-CMake教程';
  };</script><script type="text/javascript" id="disqus-lazy-load-script">$.ajax({
url: 'https://disqus.com/next/config.json',
timeout: 2500,
type: 'GET',
success: function(){
  var d = document;
  var s = d.createElement('script');
  s.src = '//dowob.disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  (d.head || d.body).appendChild(s);
  $('.disqus_click_btn').css('display', 'none');
},
error: function() {
  $('.disqus_click_btn').css('display', 'block');
}
});</script><script type="text/javascript" id="disqus-click-load">$('.btn_click_load').click(() => {  //click to load comments
    (() => { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//dowob.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
    $('.disqus_click_btn').css('display','none');
});</script><script type="text/javascript" id="disqus-count-script">$(function() {
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '//disqus.com/next/config.json', true);
     xhr.timeout = 2500;
     xhr.onreadystatechange = function () {
       if (xhr.readyState === 4 && xhr.status === 200) {
         $('.post-meta .post-comments-count').show();
         var s = document.createElement('script');
         s.id = 'dsq-count-scr';
         s.src = 'https://dowob.disqus.com/count.js';
         s.async = true;
         (document.head || document.body).appendChild(s);
       }
     };
     xhr.ontimeout = function () { xhr.abort(); };
     xhr.send(null);
   });  </script></div></div></div></div></div><div class="pure-u-1 pure-u-md-4"><div id="footer">Copyright © 2024 <a href="../../../../." rel="nofollow">SS.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/ssdemajia"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/ssdemajia"> SS.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="../../../../js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="../../../../js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="../../../../js/smartresize.js?v=0.0.0"></script></div></body></html>